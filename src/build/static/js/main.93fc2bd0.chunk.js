(this.webpackJsonppresentaciones=this.webpackJsonppresentaciones||[]).push([[0],{32:function(e,t){},44:function(e,t,n){},53:function(e,t,n){},61:function(e,t){},95:function(e,t,n){"use strict";n.r(t);n(39);var a=n(1),c=n.n(a),i=n(35),o=n.n(i),r=(n(44),n(11)),s=n(4),l=n(20),d=n(21),u=n(24),j=n(23),b=n.p+"static/media/Logo-Coronado.e500f9a1.svg",h=n(0),f=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={isActive:!1},e.handleToggle=function(){e.setState({isActive:!e.state.isActive})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.isActive;return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)("div",{className:"topBar",children:Object(h.jsx)("div",{id:"menu-bars",onClick:this.handleToggle})}),Object(h.jsx)("nav",{className:"no-mobile",children:Object(h.jsxs)("div",{className:"no-mobile-container",children:[Object(h.jsx)("img",{className:"logo",src:b,alt:"Logo Iglesia de Cristo en Coronado"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsxs)(r.b,{to:"/",exact:!0,children:["Inicio",Object(h.jsx)("div",{className:"active-line"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)(r.b,{to:"/crear",children:["Crear",Object(h.jsx)("div",{className:"active-line"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)(r.b,{to:"/agregar",children:["Agregar",Object(h.jsx)("div",{className:"active-line"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)(r.b,{to:"/modificar",children:["Modificar",Object(h.jsx)("div",{className:"active-line"})]})})]})]})}),Object(h.jsxs)("nav",{className:"navMobile",children:[Object(h.jsxs)("ul",{className:e?"active":"",children:[Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/",exact:!0,onClick:this.handleToggle,children:"Inicio"})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/crear",onClick:this.handleToggle,children:"Crear"})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/agregar",onClick:this.handleToggle,children:"Agregar"})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/modificar",onClick:this.handleToggle,children:"Modificar"})})]}),Object(h.jsx)("img",{className:"logo",src:b,alt:"Logo Iglesia de Cristo en Coronado"})]})]})}}]),n}(a.Component),m=n.p+"static/media/youtube_logo.88cd0fb3.svg",O=n.p+"static/media/facebook_logo.093b74e6.svg",p=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(h.jsx)(c.a.Fragment,{children:Object(h.jsxs)("footer",{children:[Object(h.jsx)("p",{children:"Iglesia de Cristo en Coronado, Costa Rica."}),Object(h.jsx)("img",{id:"youtube_logo",className:"footer_logo",src:m,alt:"Logo de Youtube",onClick:function(){return window.open("https://www.youtube.com/channel/UCqIKSj2WYN4mEgRKVZ-6Zow","_blank")}}),Object(h.jsx)("img",{id:"facebook_logo",className:"footer_logo",src:O,alt:"Logo de Facebook",onClick:function(){return window.open("https://www.facebook.com/iglesiadecristo.coronado","_blank")}})]})})}}]),n}(a.Component),x=(n(53),n.p+"static/media/penta1.ef60e11f.svg"),g=function(){var e=Object(a.useRef)();return Object(h.jsx)(c.a.Fragment,{children:Object(h.jsxs)("main",{id:"inicio",className:"mainContainer",children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"inicio-header",children:[Object(h.jsx)("img",{id:"penta1",src:x,alt:"imagen pentagrama y notas musicales"}),Object(h.jsx)("h1",{children:"CREACI\xd3N DE PRESENTACIONES DE CANTOS"}),Object(h.jsx)("h3",{children:"\xa1Ah\xf3rrese horas de trabajo, termine en unos cuantos clicks!"})]})}),Object(h.jsx)("div",{className:"linea-divisoria"}),Object(h.jsx)("div",{id:"abajo-inicio",className:"mas-abajo",onClick:function(){e.current.scrollIntoView({behavior:"smooth"})}}),Object(h.jsxs)("div",{className:"columnsContainer",ref:e,children:[Object(h.jsxs)("div",{className:"column column1",children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Cientos de cantos disponibles"}),Object(h.jsxs)("p",{children:["Se han agregado muchos cantos de diferentes himnarios y muchos cantos nuevos que se han aprendido aprendido a lo largo del tiempo.",Object(h.jsx)("br",{}),"Con esta herramienta se puede elegir en una larga lista y crear presentaciones f\xe1cilmente en un instante."]})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Agregar cantos nuevos"}),Object(h.jsx)("p",{children:"Si no se encuentra alg\xfan canto existe la posibilidad de agregarlo, una vez agregado un canto este estar\xe1 disponible para todos los usuarios que quieran utilizarlo en sus presentaciones."})]})]}),Object(h.jsx)("div",{className:"column column2",children:Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Modificar cantos existentes"}),Object(h.jsx)("p",{children:"Muchas veces quienes agregamos cantos nos equivocamos pero para esos errores que encontremos tambi\xe9n est\xe1 la posibilidad de modificar cualquier canto existente."}),Object(h.jsx)("div",{id:"penta2"})]})})]})]})})},v=n(16),N=n(6),C=n(7),y=n.n(C),k=n(12),I=n(2),T=n(37),w=function(e){var t=Math.ceil(e.himnos.length/16),n=Object(a.useState)(1),c=Object(I.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){o(1)}),[t]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{id:"lista-cantos",children:[e.himnos.map((function(t,n){return n>=16*i-16&&n<16*i?Object(h.jsxs)("div",{className:"titulo-container"+(t.selected?" titulo-selected":""),children:[Object(h.jsx)("div",{className:"titulo",children:Object(h.jsx)("h4",{children:t.Titulo})}),Object(h.jsxs)("div",{className:"iconos",children:[Object(h.jsx)("i",{className:"icono icono-ver",onClick:function(){return e.verHimno(t.Id,t.Titulo)}}),Object(h.jsx)("i",{className:"icono icono-agregar"+(t.selected?" icono-selected":""),onClick:function(){return e.agregarHimno(t.Id,t.Titulo)}})]})]},n):Object(h.jsx)("div",{},n)})),Object(h.jsxs)("div",{id:"paginas",children:[Object(h.jsx)("div",{id:"flecha-anterior",children:Object(h.jsx)("i",{className:"icono icono-abajo",onClick:function(){console.log("prev"),i>1&&o(i-1)}})}),Object(h.jsxs)("h3",{children:["P\xe1gina ",i,"/",t]}),Object(h.jsx)("div",{id:"flecha-siguiente",children:Object(h.jsx)("i",{className:"icono icono-abajo",onClick:function(){console.log("next"),i<t&&o(i+1)}})})]})]})})},E=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{id:"presentacion-cantos",children:e.presentacion.map((function(t,n){return Object(h.jsxs)("div",{className:"titulo-container"+(t.tipo?" "+t.tipo:""),children:[Object(h.jsx)("div",{className:"titulo",children:Object(h.jsx)("h4",{children:t.Titulo})}),Object(h.jsxs)("div",{className:"iconos",children:[Object(h.jsx)("i",{className:"icono icono-abajo",onClick:function(){return e.bajarHimno(t.Id)}}),Object(h.jsx)("i",{className:"icono icono-arriba",onClick:function(){return e.subirHimno(t.Id)}}),Object(h.jsx)("i",{className:"icono icono-cerrar",onClick:function(){return e.eliminarHimno(t.Id)}})]})]},n)}))})})},F=n(14),S=n.n(F),_=function(e){var t=e.titulo,n=e.id,c=Object(a.useState)([{Himno_Id:1,Numero_estrofa:1,Contenido:""}]),i=Object(I.a)(c,2),o=i[0],r=i[1],s=Object(a.useState)(!1),l=Object(I.a)(s,2),d=l[0],u=l[1];return Object(a.useEffect)((function(){u(!0),function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/obtenerestrofas?id="+n,{method:"get",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,r(a),u(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),Object(h.jsxs)("div",{className:"preview-container",children:[Object(h.jsx)("h1",{id:"titulo-canto",children:t}),o.map((function(e,t){var n=e.Contenido.replace(/(?:\r\n|\r|\n)/g,"<br>");return Object(h.jsx)("div",{className:"estrofa",dangerouslySetInnerHTML:{__html:n}},t)})),Object(h.jsx)("i",{id:"close-preview",className:"icono icono-cerrar"}),Object(h.jsx)(S.a,{className:"loader"+(d?" visible":""),type:"ThreeDots",color:"#80B041",height:80,width:80})]})},H=n.p+"static/media/engranajes.cd2fbc6a.svg",A=n.p+"static/media/bg.f3c89965.jpg",L=n.p+"static/media/oraciones.f14a4c4f.jpg",R=n.p+"static/media/bienvenida.f9810c9a.jpg",q=n.p+"static/media/anuncios.f56f7a1d.jpg",D=Object(a.forwardRef)((function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{ref:t,id:"lista-elementos",children:e.otrosElementos.map((function(t,n){return Object(h.jsxs)("div",{className:"titulo-container"+(t.selected?" titulo-selected":""),onClick:function(){return e.agregarElemento(t.Id,t.Titulo,t.tipo,t.url)},children:[Object(h.jsx)("div",{className:"titulo",children:Object(h.jsx)("h4",{children:t.Titulo})}),Object(h.jsx)("div",{className:"iconos-ele",children:Object(h.jsx)("i",{className:"icono icono-agregar"+(t.selected?" icono-selected":"")})})]},n)}))})})})),B=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(a.createRef)(),r=Object(a.useState)(!1),s=Object(I.a)(r,2),l=s[0],d=s[1],u=Object(a.useState)(""),j=Object(I.a)(u,2),b=j[0],f=j[1],m=Object(a.useState)([{Id:0,Titulo:"",Cantidad_estrofas:0,selected:!1}]),O=Object(I.a)(m,2),p=O[0],x=O[1],g=Object(a.useState)(""),C=Object(I.a)(g,2),F=C[0],B=C[1],P=Object(a.useState)(1),M=Object(I.a)(P,2),z=M[0],J=M[1],V=Object(a.useState)(!1),G=Object(I.a)(V,2),K=G[0],Y=G[1],Z=Object(a.useState)([{tipo:"imagen",Titulo:"Bienvenida",Id:"i1",url:R},{tipo:"oracion",Titulo:"Oraci\xf3n Inicial",Id:"o1"},{tipo:"oracion",Titulo:"Cena",Id:"o2"},{tipo:"oracion",Titulo:"Ofrenda",Id:"o3"},{tipo:"oracion",Titulo:"Predicaci\xf3n",Id:"p1"},{tipo:"oracion",Titulo:"Meditaci\xf3n",Id:"p2"},{tipo:"oracion",Titulo:"Oraci\xf3n Final",Id:"o4"},{tipo:"imagen",Titulo:"Anuncios",Id:"i2",url:q}]),U=Object(I.a)(Z,2),W=U[0],$=U[1],Q=Object(a.useState)([]),X=Object(I.a)(Q,2),ee=X[0],te=X[1],ne=function(e){return console.log("comparando listas..."),ee.forEach((function(t){var n=e.findIndex((function(e){return e.Id===t.Id}));-1!==n&&(e[n].selected=!0)})),e},ae=function(e){e&&"himno-overlay"!==e.target.id&&"close-preview"!==e.target.id||t.current.classList.toggle("visible")};Object(a.useEffect)((function(){d(!0),function(){var e=Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/himnos");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,x(n),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsxs)("main",{id:"crearContainer",className:"mainContainer",onClick:function(e){o.current.contains(e.target)||i.current.contains(e.target)||o.current.classList.remove("visible")},children:[Object(h.jsxs)("header",{className:"two-columns",children:[Object(h.jsxs)("div",{className:"header-container",children:[Object(h.jsx)("div",{className:"header-left"}),Object(h.jsx)("div",{className:"header-right",children:Object(h.jsx)("img",{id:"engranajes",className:"image-header",src:H,alt:""})})]}),Object(h.jsx)("div",{className:"mas-abajo",onClick:function(){e.current.scrollIntoView({behavior:"smooth"})}})]}),Object(h.jsx)("div",{className:"linea-divisoria"}),Object(h.jsxs)("div",{className:"columnsContainer",ref:e,children:[Object(h.jsx)("div",{className:"column column1",children:Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Lista de cantos disponibles"}),Object(h.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),d(!0),K){var t=new Set,n="";fetch("/api/buscarenestrofas?term="+b,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.length>0){for(var a=0;a<e.length;a++)t.add(e[a].Himno_Id);var c=Array.from(t);for(a=0;a<c.length;a++)n+="&array[]="+c[a];fetch("api/buscarencontenido?term="+b+n,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){x(ne(e)),d(!1)}))}else alert("No hay ning\xfan canto con este contenido."),d(!1)})).catch((function(e){console.error(e)}))}else b.length>0?fetch("api/buscartitulos?term="+b,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){x(ne(e)),d(!1)})).catch((function(e){console.error(e)})):fetch("api/himnos").then((function(e){return e.json()})).then((function(e){x(ne(e)),d(!1)})).catch((function(e){console.error(e)}))},children:[Object(h.jsxs)("div",{id:"buscar-container",children:[Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)("i",{className:"icono icono-buscar"})}),Object(h.jsx)("input",{type:"text",name:"search",placeholder:"Buscar Canto",value:b,onChange:function(e){var t=e.target.value;f(t),t.length>0?n.current.classList.add("visible"):n.current.classList.remove("visible")}}),Object(h.jsx)("div",{onClick:function(){d(!0),f(""),n.current.classList.remove("visible"),function(){var e=Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/himnos");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,x(ne(n)),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()},children:Object(h.jsx)("i",{id:"borrar-termino",className:"icono icono-cerrar",ref:n})})]}),Object(h.jsxs)("label",{children:["Buscar en contenido ",Object(h.jsx)("input",{type:"checkbox",onChange:function(e){var t=e.target.checked;Y(t)}})]})]}),Object(h.jsx)(w,{himnos:p,verHimno:function(e,t){J(e),B(t),ae()},agregarHimno:function(e,t){var n=p.findIndex((function(t){return t.Id===e})),a=Object(N.a)(p),c=Object(v.a)({},a[n]);if(!c.selected){c.selected=!0,a[n]=c,x(a);var i=[{Id:e,Titulo:t}],o=Object(N.a)(ee).concat(i);te(o)}}})]})}),Object(h.jsx)("div",{className:"column column2",children:Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Lista de elementos en la presentaci\xf3n"}),Object(h.jsxs)("div",{id:"iconos-presentacion",children:[Object(h.jsxs)("div",{className:"icono",children:[Object(h.jsx)("i",{ref:i,className:"icono-crear",onClick:function(){o.current.classList.toggle("visible")}}),"Otros"]}),Object(h.jsxs)("div",{className:"icono",children:[Object(h.jsx)("i",{className:"icono-descargar",onClick:function(){if(d(!0),ee.length>0){var e=new T.a;e.author="Creador de presentaciones",e.subject="Presentaci\xf3n de cantos",e.title="Presentaci\xf3n de cantos";for(var t=[],n=0;n<ee.length;n++)ee[n].tipo||t.push(fetch("api/obtenerestrofas?id="+ee[n].Id));Promise.all(t).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(t){var n=0;ee.forEach((function(a,c){var i=e.addSlide();if(a.tipo)"oracion"===a.tipo?(i.background={path:L},i.addText(a.Titulo,{x:0,y:1.51,h:2.61,w:"100%",color:"FFFFFF",fontSize:60,bold:!0,align:e.AlignH.center})):"imagen"===a.tipo&&("Bienvenida"===a.Titulo?i.background={path:R}:i.background={path:q});else{i.background={path:L},i.addText(a.Titulo,{x:0,y:1.51,h:2.61,w:"100%",color:"FFFFFF",fontSize:60,bold:!0,align:e.AlignH.center});var o=t[n];o.forEach((function(t,n){(i=e.addSlide()).background={color:"000000"},i.background={path:A},i.addText(t.Numero_estrofa,{x:.08,y:0,w:.5,h:.5,color:"FFFFFF",align:e.AlignH.left});var a=50,c=t.Contenido.replace(/[\r\n]+$/,""),r=c.split(/\r\n|\r|\n/).length;a=r>=6&&r<8?46:r>7?40:50,i.addText(c,{isTextBox:!0,shrinkText:!0,autofit:!0,x:0,y:0,w:"100%",h:"100%",fontSize:a,color:"FFFFFF",align:e.AlignH.center}),n===o.length-1&&i.addText("Fin",{x:9.42,y:5.145,w:.54,h:.42,color:"FFFFFF",align:e.AlignH.left})})),n+=1}})),e.writeFile({fileName:"Presentacion de prueba.pptx"}),d(!1)})).catch((function(e){console.error(e)}))}}}),"Descargar"]}),Object(h.jsxs)("div",{className:"icono",children:[Object(h.jsx)("i",{className:"icono-borrar-todo",onClick:function(){var e=Object(N.a)(p),t=Object(N.a)(W);ee.forEach((function(n){if(n.tipo){var a=W.findIndex((function(e){return e.Id===n.Id})),c=Object(v.a)({},t[a]);c.selected=!1,t[a]=c}else{var i=p.findIndex((function(e){return e.Id===n.Id})),o=Object(v.a)({},e[i]);o.selected=!1,e[i]=o}})),$(t),x(e),te([])}}),"Borrar lista"]})]}),Object(h.jsx)(D,{ref:o,otrosElementos:W,agregarElemento:function(e,t,n,a){var c=W.findIndex((function(t){return t.Id===e})),i=Object(N.a)(W),o=Object(v.a)({},i[c]),r=[{Id:e,Titulo:t,tipo:n,url:a}];if(!o.selected){o.selected=!0,i[c]=o,$(i);var s=Object(N.a)(ee).concat(r);te(s)}}}),Object(h.jsx)(E,{presentacion:ee,bajarHimno:function(e){var t=ee.findIndex((function(t){return t.Id===e}));if(t<ee.length-1){var n=ee[t],a=ee.filter((function(t){return t.Id!==e}));a.splice(t+1,0,n),te(a)}},subirHimno:function(e){var t=ee.findIndex((function(t){return t.Id===e}));if(t>0){var n=ee[t],a=ee.filter((function(t){return t.Id!==e}));a.splice(t-1,0,n),te(a)}},eliminarHimno:function(e){var t=ee.filter((function(t){return t.Id!==e}));te(t);var n=p.findIndex((function(t){return t.Id===e})),a=Object(N.a)(p),c=Object(v.a)({},a[n]);c.selected=!1,a[n]=c,x(a);var i=W.findIndex((function(t){return t.Id===e})),o=Object(N.a)(W),r=Object(v.a)({},o[i]);r.selected=!1,o[i]=r,$(o)}})]})})]}),Object(h.jsx)("div",{ref:t,id:"himno-overlay",onClick:ae,children:Object(h.jsx)(_,{titulo:F,id:z})})]}),Object(h.jsx)(S.a,{className:"loader"+(l?" visible":""),type:"ThreeDots",color:"#ACD25D",height:80,width:80})]})},P=Object(a.forwardRef)((function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{ref:t,id:"lista-busqueda",children:[Object(h.jsx)("i",{className:"icono icono-cerrar",onClick:e.cerrarOverlay}),Object(h.jsx)("p",{children:"Hay m\xe1s de un canto que coincide con su busqueda por favor"}),Object(h.jsx)("h3",{children:"Elija el canto que desea modificar."}),e.himnos.map((function(t,n){return Object(h.jsxs)("div",{className:"titulo-container"+(t.selected?" titulo-selected":""),onClick:function(){return e.desplegarEstrofas(t.Id,t.Titulo)},children:[Object(h.jsx)("div",{className:"titulo",children:Object(h.jsx)("h4",{children:t.Titulo})}),Object(h.jsx)("div",{className:"iconos-ele",children:Object(h.jsx)("i",{className:"icono icono-agregar"+(t.selected?" icono-selected":"")})})]},n)}))]})})})),M=n(38),z=function(e){var t=Object(a.useRef)(),n=function(e){var t=(e.target.value.match(/\n/g)||[]).length+1;if(console.log(t),13===e.which&&t>=8)return e.preventDefault(),!1},c=function(e){var t=e.target.getElementsByTagName("textarea");t.length>0&&t[0].focus()};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{id:"estrofas-inputs",ref:t,children:e.estrofas.map((function(t,a){return Object(h.jsxs)("div",{className:"textarea-container",onClick:c,children:[Object(h.jsx)(M.a,{maxLength:"272",onKeyPress:n,className:"estrofa-textarea",maxRows:"8",cols:"32",value:t.Contenido,onChange:function(n){return function(t,n){e.updateEstrofa(t.Numero_estrofa,n)}(t,n)}}),Object(h.jsxs)("h4",{children:["Diapositiva ",t.Numero_estrofa]}),Object(h.jsx)("i",{className:"icono icono-cerrar",onClick:function(){return e.borrarEstrofa(t.Numero_estrofa)}})]},a)}))})})},J=n(15),V=n.p+"static/media/agregar_image.555e06bf.svg",G=function(){var e=Object(a.useRef)(),t=Object(a.createRef)(),n=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(a.useState)(!1),r=Object(I.a)(o,2),s=r[0],l=r[1],d=Object(a.useState)(""),u=Object(I.a)(d,2),j=u[0],b=u[1],f=Object(a.useState)([{Id:0,Titulo:"",Cantidad_estrofas:0,selected:!1}]),m=Object(I.a)(f,2),O=m[0],p=m[1],x=Object(a.useState)([]),g=Object(I.a)(x,2),v=g[0],C=g[1],T=Object(J.usePopup)("confirm",(function(e){e.message;var t=e.confirm,n=e.cancel;return Object(h.jsxs)("div",{className:"confirm-guardar modal",children:["\xbfEst\xe1 seguro que desea AGREGAR este canto a la base de datos?",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"Despu\xe9s de agregar un himno este se puede modificar en la secci\xf3n respectiva."}),Object(h.jsx)("button",{className:"aceptar-btn",onClick:t,children:"Aceptar"}),Object(h.jsx)("button",{className:"cancelar-btn",onClick:n,children:"Cancelar"})]})})),w=Object(I.a)(T,1)[0],E=function(e,t){l(!0),fetch("api/obtenerestrofas?id="+e).then((function(e){return e.json()})).then((function(e){C(e),l(!1),i.current.style.display="none"})).catch((function(e){return console.error(e)})),b(t),n.current.style.display="none"},F=function(){var e=Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v.length>0&&j.length>1)){e.next=7;break}return e.next=3,w();case 3:e.sent&&(l(!0),console.log(j,v),t=[],n={titulo:j,cantidad:v.length},fetch("api/insertarhimno",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var n=e.insertId;v.forEach((function(e,a){var c={id:n,numero:a+1,contenido:e.Contenido};t.push(fetch("api/insertarestrofa",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}))})),Promise.allSettled(t).then((function(e){console.log(e),C([]),i.current.innerHTML='<h1>El canto "'+j+'" ha sido agregado a la Base de datos.</h1>',i.current.style.display="block",b(""),l(!1)})).catch((function(e){console.error(e),l(!1)}))})).catch((function(e){console.error(e),alert("\xa1Error en la conexi\xf3n!"),l(!1)}))),e.next=8;break;case 7:0===v.length?alert("Debe haber m\xednimo una estrofa"):0===j.length&&alert("Se necesita un t\xedtulo para el canto.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsxs)("main",{id:"agregarContainer",className:"mainContainer",children:[Object(h.jsxs)("header",{className:"two-columns",children:[Object(h.jsxs)("div",{className:"header-container",children:[Object(h.jsx)("div",{className:"header-left"}),Object(h.jsx)("div",{className:"header-right",children:Object(h.jsx)("img",{id:"agregar",className:"image-header",src:V,alt:""})})]}),Object(h.jsx)("div",{className:"mas-abajo",onClick:function(){e.current.scrollIntoView({behavior:"smooth"})}})]}),Object(h.jsx)("div",{className:"linea-divisoria"}),Object(h.jsxs)("div",{className:"columnsContainer",ref:e,children:[Object(h.jsx)("div",{className:"column column1",children:Object(h.jsx)("section",{children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(!0),j.length>0?fetch("api/buscartitulo?term="+j,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.length>1?(n.current.style.display="block",p(e),l(!1)):e.length>0?(E(e[0].Id,e[0].Titulo),l(!1)):(alert("No hay ning\xfan t\xedtulo que coincida."),l(!1))})).catch((function(e){console.error(e),alert("\xa1Error en la conexi\xf3n!"),l(!1)})):(alert("La busqueda est\xe1 vac\xeda. Digite algun texto para buscar."),l(!1))},children:[Object(h.jsxs)("div",{className:"titulo-modificar",children:[Object(h.jsx)("h2",{children:"T\xedtulo:"}),Object(h.jsx)("div",{className:"buscar-container",children:Object(h.jsx)("input",{type:"text",name:"search",placeholder:"Buscar Canto",value:j,onChange:function(e){var t=e.target.value;b(t)}})})]}),Object(h.jsx)("button",{type:"submit",children:"Verificar"})]})})}),Object(h.jsx)("div",{className:"column column2",children:Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{className:"cantidad-header",children:"Cantidad de estrofas:"}),Object(h.jsx)("div",{className:"numero",children:v.length}),Object(h.jsxs)("div",{id:"add-icons",children:[Object(h.jsxs)("div",{className:"guardar-container",onClick:function(){var e=Object(N.a)(v);e.push({Himno_Id:null,Numero_estrofa:e.length+1,Contenido:""}),C(e),i.current.style.display="none"},children:[Object(h.jsx)("i",{className:"icono-nueva"}),"Nueva Diapositiva"]}),Object(h.jsxs)("div",{className:"guardar-container",onClick:F,children:[Object(h.jsx)("i",{className:"icono-salvar"}),"Guardar Canto"]}),Object(h.jsxs)("div",{className:"guardar-container",onClick:function(){C([]),i.current.style.display="block"},children:[Object(h.jsx)("i",{className:"icono-borrar-todo"}),"Borrar todo"]})]})]})})]}),Object(h.jsx)("div",{className:"overlay",ref:n,children:Object(h.jsx)(P,{ref:t,himnos:O,desplegarEstrofas:E,cerrarOverlay:function(){n.current.style.display="none"}})}),Object(h.jsx)(z,{estrofas:v,updateEstrofa:function(e,t){var n=Object(N.a)(v),a=t.target.value;n[e-1].Contenido=a,C(n)},borrarEstrofa:function(e){if(v.length>1){var t=e-1,n=Object(N.a)(v);n.splice(t,1),n.forEach((function(e){e.Numero_estrofa>=t+1&&(e.Numero_estrofa-=1,e.updated=!0)})),C(n)}else alert("No se puede eliminar. Cada himno debe tener m\xednimo una estrofa.")}}),Object(h.jsx)("div",{ref:i,className:"relleno",children:Object(h.jsx)("h1",{children:"Escoja un t\xedtulo y agregue diapositivas."})})]}),Object(h.jsx)(S.a,{className:"loader"+(s?" visible":""),type:"ThreeDots",color:"#80B041",height:80,width:80})]})},K=n.p+"static/media/edit_image.d4c1872c.svg",Y=function(){var e=Object(a.useRef)(),t=Object(a.createRef)(),n=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(a.useState)([{id:0,titulo:"",cantidad:0,updated:!1}]),r=Object(I.a)(o,2),s=r[0],l=r[1],d=Object(a.useState)(!1),u=Object(I.a)(d,2),j=u[0],b=u[1],f=Object(a.useState)(""),m=Object(I.a)(f,2),O=m[0],p=m[1],x=Object(a.useState)([{Id:0,Titulo:"",Cantidad_estrofas:0,selected:!1}]),g=Object(I.a)(x,2),v=g[0],C=g[1],T=Object(a.useState)([]),w=Object(I.a)(T,2),E=w[0],F=w[1],_=Object(a.useState)(!1),H=Object(I.a)(_,2),A=H[0],L=H[1],R=Object(J.usePopup)("confirm",(function(e){e.message;var t=e.confirm,n=e.cancel;return Object(h.jsxs)("div",{className:"confirm-modal modal",children:["\xbfEst\xe1 seguro que desea ELIMINAR el canto ",Object(h.jsx)("br",{}),'"',s[0].titulo,'"?',Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"Despu\xe9s de eliminar un canto este ya no estar\xe1 disponible."}),Object(h.jsx)("button",{className:"eliminar-btn",onClick:t,children:"Eliminar"}),Object(h.jsx)("button",{className:"cancelar-btn",onClick:n,children:"Cancelar"})]})})),q=Object(I.a)(R,1)[0],D=Object(J.usePopup)("guardar",(function(e){e.message;var t=e.confirm,n=e.cancel;return Object(h.jsxs)("div",{className:"confirm-guardar modal",children:["\xbfEst\xe1 seguro que desea Guardar los cambios de este canto en la base de datos?",Object(h.jsx)("button",{className:"aceptar-btn",onClick:t,children:"Aceptar"}),Object(h.jsx)("button",{className:"cancelar-btn",onClick:n,children:"Cancelar"})]})})),B=Object(I.a)(D,1)[0],M=function(e,t){var n=Object(N.a)(s);e.forEach((function(e,a){n[0][e]=t[a]})),l(n)},V=function(e,t){b(!0),i.current.style.display="none",fetch("api/obtenerestrofas?id="+e).then((function(e){return e.json()})).then((function(e){F(e),b(!1),M(["titulo","cantidad","id"],[t,e.length,e[0].Himno_Id])})).catch((function(e){return console.error(e)})),p(t),n.current.style.display="none"},G=function(){var e=Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s[0].cantidad>0)){e.next=7;break}return e.next=3,q();case 3:e.sent?(t=[],n={id:s[0].id},t.push(fetch("api/borrartodasestrofas?id="+n.id,{method:"delete",headers:{"Content-Type":"application/json"}})),t.push(fetch("api/borrarhimno?id="+n.id,{method:"delete",headers:{"Content-Type":"application/json"}})),Promise.all(t).then((function(){l([{id:0,titulo:"",cantidad:0,updated:!1}]),F([]),C([{Id:0,Titulo:"",Cantidad_estrofas:0,selected:!1}]),p(""),i.current.innerHTML="<h1>El canto ha sido eliminado.</h1>",i.current.style.display="block"})).catch((function(e){console.error(e),b(!1)}))):console.log("No ha pasado nada"),e.next=8;break;case 7:alert("No hay nada que eliminar. Selecciona un canto antes.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(k.a)(y.a.mark((function e(){var t,n,a,c,o,r,d,u,j,h,f,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s[0].cantidad>0)){e.next=7;break}return e.next=3,B();case 3:if(e.sent){if(b(!0),t=[],n={},a={titulo:s[0].titulo,cantidad:E.length,id:E[0].Himno_Id},s[0].cantidad>E.length){for(c=s[0].cantidad-E.length,o=0;o<c;o++)r={id:a.id,numero:s[0].cantidad-o},t.push(fetch("api/borrarestrofa?id="+r.id+"&cantidad="+r.numero,{method:"delete",headers:{"Content-Type":"application/json"}}));d=s[0].cantidad-c,M(["cantidad"],[d])}else if(s[0].cantidad<E.length){for(u=E.length-s[0].cantidad,o=1;o<=u;o++)j=s[0].cantidad+o,h={id:a.id,numero:j,contenido:E[j-1].Contenido},t.push(fetch("api/insertarestrofa",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})),(f=Object(N.a)(E))[j-1].updated=!1,F(f);m=s[0].cantidad+u,M(["cantidad"],[m])}s[0].updated?(t.push(fetch("api/actualizartitulo",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})),M(["updated"],[!1])):console.log("El himno NO ha sido actualizado"),Object(N.a)(E).forEach((function(e){e.updated?(n={id:e.Himno_Id,numero:e.Numero_estrofa,contenido:e.Contenido},t.push(fetch("api/actualizarestrofa",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})),e.updated=!1):console.log("La estrofa:"+e.Numero_estrofa+" NO ha sido actualizado")})),Promise.all(t).then((function(){F([]),l([{id:0,titulo:"",cantidad:0,updated:!1}]),p(""),i.current.style.display="block",i.current.innerHTML="<h1>El canto ha sido actualizado.</h1>",b(!1)})).catch((function(e){console.error(e),b(!1)}))}e.next=8;break;case 7:alert("No hay nada que guardar.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsxs)("main",{id:"modificarContainer",className:"mainContainer",children:[Object(h.jsxs)("header",{className:"two-columns",children:[Object(h.jsxs)("div",{className:"header-container",children:[Object(h.jsx)("div",{className:"header-left"}),Object(h.jsx)("div",{className:"header-right",children:Object(h.jsx)("img",{id:"edit-image",className:"image-header",src:K,alt:""})})]}),Object(h.jsx)("div",{className:"mas-abajo",onClick:function(){e.current.scrollIntoView({behavior:"smooth"})}})]}),Object(h.jsx)("div",{className:"linea-divisoria"}),Object(h.jsxs)("div",{className:"columnsContainer",ref:e,children:[Object(h.jsx)("div",{className:"column column1",children:Object(h.jsx)("section",{children:Object(h.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),M(["updated"],[!1]),F([]),b(!0),A)if(O.length>0){var t=new Set,a="";fetch("/api/buscarenestrofas?term="+O,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){for(var c=0;c<e.length;c++)t.add(e[c].Himno_Id);var i=Array.from(t);for(c=0;c<i.length;c++)a+="&array[]="+i[c];fetch("api/buscarencontenido?term="+O+a,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(!1),e.length>1?(n.current.style.display="block",C(e)):e.length>0?V(e[0].Id,e[0].Titulo):(alert("No hay coincidencias con su busqueda"),b(!1))})).catch((function(e){console.error(e),alert("\xa1Error en la conexi\xf3n!"),b(!1)}))})).catch((function(e){console.error(e),alert("\xa1Error en la conexi\xf3n!"),b(!1)}))}else window.alert("La busqueda est\xe1 vac\xeda. Digite algun texto para buscar."),b(!1);else O.length>0?fetch("api/buscartitulos?term="+O,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(!1),e.length>1?(n.current.style.display="block",C(e)):e.length>0?V(e[0].Id,e[0].Titulo):(alert("No hay coincidencias con su busqueda"),b(!1))})).catch((function(e){console.error(e),alert("\xa1Error en la conexi\xf3n!"),b(!1)})):(alert("La busqueda est\xe1 vac\xeda. Digite algun texto para buscar."),b(!1))},children:[Object(h.jsxs)("div",{className:"titulo-modificar",children:[Object(h.jsx)("h2",{children:"T\xedtulo:"}),Object(h.jsx)("div",{className:"buscar-container",children:Object(h.jsx)("input",{type:"text",name:"search",placeholder:"Buscar Canto",value:O,onChange:function(e){var t=e.target.value;p(t),E.length>0&&M(["titulo","updated"],[t,!0])}})})]}),Object(h.jsx)("button",{type:"submit",children:"Buscar"}),Object(h.jsxs)("label",{children:["Buscar en contenido ",Object(h.jsx)("input",{type:"checkbox",onChange:function(e){var t=e.target.checked;L(t)}})]})]})})}),Object(h.jsx)("div",{className:"column column2",children:Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{className:"cantidad-header",children:"Cantidad de estrofas:"}),Object(h.jsx)("div",{className:"numero",children:E.length}),Object(h.jsxs)("div",{id:"modify-icons",children:[Object(h.jsxs)("div",{className:"guardar-container",onClick:function(){if(0!==s[0].id){var e=Object(N.a)(E);e.push({Himno_Id:e[0].Himno_Id,Numero_estrofa:e.length+1,Contenido:""}),F(e)}else alert("No ha seleccionado ning\xfan canto para modificar.")},children:[Object(h.jsx)("i",{className:"icono-nueva"}),"Nueva Diapositiva"]}),Object(h.jsxs)("div",{className:"guardar-container",onClick:Y,children:[Object(h.jsx)("i",{className:"icono-salvar"}),"Guardar Cambios"]}),Object(h.jsxs)("div",{className:"guardar-container",onClick:G,children:[Object(h.jsx)("i",{className:"icono-eliminar"}),"Eliminar Canto"]})]})]})})]}),Object(h.jsx)("div",{className:"overlay",ref:n,children:Object(h.jsx)(P,{ref:t,himnos:v,desplegarEstrofas:V,cerrarOverlay:function(){n.current.style.display="none"}})}),Object(h.jsx)(z,{estrofas:E,updateEstrofa:function(e,t){var n=Object(N.a)(E),a=t.target.value;n[e-1].Contenido=a,n[e-1].updated=!0,F(n)},borrarEstrofa:function(e){if(E.length>1){var t=e-1;console.log("estrofa index: "+t);var n=Object(N.a)(E);n.splice(t,1),n.forEach((function(e){e.Numero_estrofa>=t+1&&(e.Numero_estrofa-=1,e.updated=!0)})),M(["updated"],[!0]),F(n)}else alert("No se puede elminar. Cada himno debe tener m\xednimo una estrofa.")}}),Object(h.jsx)("div",{ref:i,className:"relleno",children:Object(h.jsx)("h1",{children:"Escoja el canto que desea modificar."})})]}),Object(h.jsx)(S.a,{className:"loader"+(j?" visible":""),type:"ThreeDots",color:"#80B041",height:80,width:80})]})},Z=function(){return Object(h.jsx)("h1",{children:"404: La p\xe1gina no se encuentra."})};var U=function(){return Object(h.jsx)(r.a,{children:Object(h.jsx)(J.PopupProvider,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(f,{}),Object(h.jsx)("div",{id:"page-body",children:Object(h.jsxs)(s.c,{children:[Object(h.jsx)(s.a,{path:"/",component:g,exact:!0}),Object(h.jsx)(s.a,{path:"/crear",component:B}),Object(h.jsx)(s.a,{path:"/agregar",component:G}),Object(h.jsx)(s.a,{path:"/modificar",component:Y}),Object(h.jsx)(s.a,{component:Z})]})}),Object(h.jsx)(p,{})]})})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(U,{})}),document.getElementById("root")),W()}},[[95,1,2]]]);
//# sourceMappingURL=main.93fc2bd0.chunk.js.map